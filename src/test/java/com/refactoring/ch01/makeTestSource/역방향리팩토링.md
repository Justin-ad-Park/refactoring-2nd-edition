# Chapter1. 리버스 리팩토링

***

### 0단계: 최초 코드 커밋

### 1단계: 부모 클레스(Ch01Test)를 테스트 클래스로 통합
- 상위 클레스 Ch01Test의 테스트 코드를 하위 클레스 StatementTestReverseFactoring에 병합

### 2단계: 데이터 로더(Ch01DataLoader)를 테스트 클래스로 통합
- 상위 클레스 Ch01DataLoader 데이터 적재 기능을 통합
- 생성자 Ch01DataLoader(ClassLoader,ObjectMapper)를 없애고 단순 메서드로 변경
- **[Before]**
  ``` java
  public class Ch01Test {
      private static final Ch01DataLoader DATA_LOADER = new Ch01DataLoader(
            Ch01Test.class.getClassLoader(),
            new ObjectMapper()
      );
  ...
  }

   public class Ch01DataLoader {
     public Ch01DataLoader(final ClassLoader classLoader, final ObjectMapper mapper) {
         this.classLoader = classLoader;
         this.mapper = mapper;
     }
   
      private <T> T loadResource(String path, TypeReference<T> typeReference) {
        try (InputStream inputStream = classLoader.getResourceAsStream(path)) {
            if (Objects.isNull(inputStream)) {
                throw new IllegalStateException("테스트 리소스가 없습니다!: " + path);
            }
            return mapper.readValue(inputStream, typeReference);
        } catch (IOException e) {
            throw new UncheckedIOException(e);
        }
      }
   }
  ```
  
- **[After]**
  ``` java
  class StatementTestReverseFactoring {
    private <T> T loadResource(String path, TypeReference<T> typeReference) {
        final ObjectMapper mapper = new ObjectMapper();

        try (InputStream inputStream = getClass().getResourceAsStream(path)) {
            if (Objects.isNull(inputStream)) {
                throw new IllegalStateException("테스트 리소스가 없습니다!: " + path);
            }
            return mapper.readValue(inputStream, typeReference);
        } catch (IOException e) {
            throw new UncheckedIOException(e);
        }
    }
  }
  ```
  
  
  ---
# 참고 문법
### H3제목 

- .
- xxx `--.--`xxx.


  ```text
    block statement
  ```

1. xxx `블록 sentence` xxx



> 주석 : 
> 주석 내용....

<br/>

- 점문자
    - 들여쓰기



| 테이블 | 테이블 |
|----|----|
| 내용 | xx |
| xx | xx |

